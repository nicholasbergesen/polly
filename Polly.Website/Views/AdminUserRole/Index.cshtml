@model IEnumerable<Polly.Website.Models.AdminUserRoleView>

@{
    ViewBag.Title = "Index";
}

<div class="container pt-4">
    <h3>Top 10 Cache</h3>
    <hr />
    <div class="row">
        <ul>
            <li>Last Populated: @TopTenCache.LastPopulated.GetValueOrDefault()</li>
            <li>Item Count: @TopTenCache.Products.Count</li>
            <li>Repopulated: @TopTenCache.RepopulatedCount</li>
            <li>Failed to populated: @TopTenCache.FailedPopulateAttempts</li>
        </ul>
    </div>
    <div class="row">
        <a class="btn btn-primary" href="/AdminUserRole/LoadTop10Cache">Reload Cache</a>
    </div>
    <br />
    <h3>Users</h3>
    <hr />
    <div class="row">
        <p>
            @Html.ActionLink("Create User", "Create") |
            @Html.ActionLink("Create Role", "Index", "ApplicationRolesController")
        </p>
        <table class="table">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Email)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.IsEnabled)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.EmailConfirmed)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Roles)
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Email)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.IsEnabled)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.EmailConfirmed)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Roles)
                    </td>
                    <td>
                        @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                        @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                        @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                    </td>
                </tr>
            }

        </table>
    </div>
</div>
